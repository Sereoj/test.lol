# Mock Data для разработки

## Обзор

Этот проект включает инструменты для создания моковых данных в режиме разработки. Моковые данные помогут вам быстро заполнить базу данных реалистичными записями для тестирования и разработки функционала без необходимости создавать данные вручную.

## Основные компоненты

1. **Фабрики** - классы для создания отдельных моделей с реалистичными данными
2. **Сидеры** - классы для массового наполнения базы данных
3. **Фасад MockData** - удобный доступ к моковым данным через статические методы
4. **Команда dev:seed** - Artisan-команда для быстрого заполнения базы данными

## Использование

### Заполнение базы данных моковыми данными

```bash
php artisan dev:seed
```

Эта команда создаст:
- 10 пользовательских настроек
- 13 достижений
- 20 пользователей + 1 администратора
- 20 балансов пользователей
- 20 настроек уведомлений
- 15 аватаров
- 15 категорий (5 корневых, 10 подкатегорий)
- 50 постов (30 опубликованных, 10 черновиков, 10 платных)
- 60 медиафайлов (40 изображений, 10 видео, 5 resized, 5 compressed)
- 50 связей между постами и медиафайлами
- 130 комментариев (100 обычных, 30 ответов)
- 70 лайков/дизлайков к комментариям
- 450 взаимодействий с постами (просмотры, лайки, скачивания)
- 50 статистик постов
- 50 подписок между пользователями
- 30 тегов различных типов
- 45 транзакций разных типов
- 18 подписок
- 10 челленджей

### Использование фасада MockData в коде

```php
use MockData;

// Получить случайного пользователя
$user = MockData::getRandomUser();

// Получить случайный опубликованный пост
$post = MockData::getRandomPublishedPost();

// Получить 3 случайных тега
$tags = MockData::getRandomTags(3);

// Получить пользователей с постами
$usersWithPosts = MockData::getUsersWithPosts(5, 3);
```

### Использование фабрик напрямую

```php
// Создать 5 пользователей
$users = \App\Models\Users\User::factory()->count(5)->create();

// Создать 3 опубликованных платных поста
$posts = \App\Models\Posts\Post::factory()->count(3)->published()->paid()->create();

// Создать активную подписку
$subscription = \App\Models\Subscription::factory()->active()->create();

// Создать транзакцию вывода средств
$withdrawal = \App\Models\Transaction::factory()->withdrawal()->create();

// Создать настройки приватности пользователя
$settings = \App\Models\Users\UserSetting::factory()->private()->create();

// Создать вирусную статистику поста
$viralStats = \App\Models\PostStatistic::factory()->viral()->create();

// Создать разные типы медиафайлов
$originalImage = \App\Models\Media::factory()->image()->create();
$compressedImage = \App\Models\Media::factory()->compressed()->create();
$video = \App\Models\Media::factory()->video()->create();
```

## Доступные фабрики

- **UserFactory** - пользователи с различными параметрами
- **UserSettingFactory** - настройки пользователей
- **NotificationSettingFactory** - настройки уведомлений
- **AvatarFactory** - аватары пользователей
- **AchievementFactory** - достижения с различной ценностью
- **CategoryFactory** - категории с поддержкой иерархии
- **PostFactory** - посты с различными состояниями
- **CommentFactory** - комментарии и ответы на комментарии
- **CommentLikeFactory** - лайки и дизлайки к комментариям
- **MediaFactory** - медиафайлы различных типов
- **PostMediaFactory** - связи постов с медиафайлами
- **InteractionFactory** - различные взаимодействия с постами
- **PostStatisticFactory** - статистика постов с разным уровнем вовлеченности
- **FollowFactory** - подписки между пользователями
- **UserBalanceFactory** - балансы пользователей
- **TransactionFactory** - транзакции разных типов
- **SubscriptionFactory** - подписки с различными статусами
- **TagFactory** - теги разных типов
- **ChallengeFactory** - челленджи с различными статусами

## Важные замечания

1. Моковые данные предназначены только для разработки и тестирования
2. Не запускайте `dev:seed` на производственной среде! (Есть защита от случайного запуска)
3. Данные сидера очищают таблицы перед заполнением (для консистентности)
4. Все фабрики учитывают структуру таблиц из миграций
5. Для медиафайлов поддерживаются различные типы и версии (original, resized, compressed, blur)

## Расширение

Вы можете добавить свои собственные фабрики и расширить функционал, следуя существующим паттернам:

1. Создайте новую фабрику в директории `database/factories/`
2. Добавьте логику создания данных в `DevelopmentSeeder.php`
3. При необходимости добавьте методы в `MockDataService.php` 